<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Blog Admin Portal  This is All Blog Page</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Portal - Bootstrap 5 Admin Dashboard Template For Developers">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">    
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- FontAwesome JS-->
    <script defer src="../../public/plugins/fontawesome/js/all.min.js"></script>
    
    <!-- App CSS -->  
    <link id="theme-style" rel="stylesheet" href="../public/css/cards.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
       <!-- App CSS -->  
    <!-- <link id="theme-style" rel="stylesheet" href="../public/css/style.css"> -->


</head> 

<body> 
  <header class="app-header fixed-top"> 
    <%- include('partials/nav.ejs') -%>
    <%- include('partials/menubar.ejs') -%>
  </header>
    <div class="app-content pt-3 p-md-3 p-lg-4 mt-3">
        <div class="container-xl">
            
          <h1 class="app-page-title">All Blogs</h1>

          <div class="container-fluid">
            <div class="row">
              <% for(let i=0 ; i< blogData.length; i++){ %>   
              <div class="col-12 col-sm-8 col-md-6 col-lg-4 mb-5">

               
                  <div class="card">
                    <img class="card-img" src="<%= blogData[i].imagePath %>" alt="Bologna">
                      <p href="#" class="btn btn-light btn-sm" style="cursor: default;"><%= blogData[i].category %></p>
            

                    <div class="card-body">
                      <h4 class="card-title"><%= blogData[i].title %></h4>

                      <small class="text-muted cat">
                        <i class="far fa-clock text-info"></i> 30 minutes
                        <i class="fas fa-users text-info"></i> 4 portions
                      </small>
                      
                      <p class="card-text blogdescription" id="blogdescriptions"><%= blogData[i].description %></p>
                      <button href="#" class="btn btn-md btn-primary text-white" value="<%= blogData[i]._id %>">Edit</button>
                      <button href="" class='dltbtn btn btn-md btn-danger text-white' value="<%= blogData[i]._id %>">Delete</button>
                    </div>

                    <div class="card-footer text-muted d-flex justify-content-between bg-transparent border-top-0">
                      <div class="views">Oct 20, 12:45PM
                      </div>
                      <div class="stats">
                           <i class="far fa-eye"></i> 1347
                        <i class="far fa-comment"></i> 12
                      </div>
                    </div>
                  </div>
               
              </div>
          
              <% } %>
            </div>
          </div>
            
            
        </div><!--//container-fluid-->
    </div><!--//app-content-->

  


    <script>
          
           $(document).ready(function () {

            // let blogDescription = document.getElementById('blogdescriptions').innerHTML;
            
            // console.log(blogDescription);

            let blogDescription = document.getElementsByClassName('blogdescription').innerHTML;
            console.log(blogDescription);

            $('.blogdescription').each(function(){
                let textConvert = $(this).text();
                let temp = $(this).html(textConvert); 
            })

              // alert("This is alert");
              // const temp = `<%- JSON.stringify(blogData) %>`;
              // alert(temp);

              // $("submit").click(function(){
              //   $("p").append("<% blogData.description %>");
              // });

              $('.description').on('submit', function(){
                $("p").append("<% blogData.description %>");
                  
              });


              $('.dltbtn').on('click' , function(blogData) {

                let id = $(this).val();
                console.log(id);

                $.ajax({
                   type: "DELETE",
                   url: `/blog/${id}`,
                   success: function(data) {
                    location.href = "/blog/getallblog";
                   }
                })
              });


           })
    </script>



     <!-- Javascript -->    
     <script src="../public/plugins/popper.min.js"></script>
     <script src="../public/plugins/bootstrap/js/bootstrap.min.js"></script>  
 
     <!-- Charts JS
     <script src="assets/plugins/chart.js/chart.min.js"></script> 
     <script src="assets/js/index-charts.js"></script>  -->
     
     <!-- Page Specific JS -->
     <script src="../public/js/app.js"></script> 


</body>

</html>