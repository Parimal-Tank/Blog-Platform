<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Blog Admin Portal  This is All Blog Page</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Portal - Bootstrap 5 Admin Dashboard Template For Developers">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">    
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- FontAwesome JS-->
    <script defer src="../../public/plugins/fontawesome/js/all.min.js"></script>
    
    <!-- App CSS -->  
    <link id="theme-style" rel="stylesheet" href="../public/css/style.css">

</head> 

<body>  
    <header class="app-header fixed-top">
    <%- include('partials/nav.ejs') -%>
    <%- include('partials/menubar.ejs') -%>
    </header>
    <div class="app-content pt-3 p-md-3 p-lg-4">
        <div class="container-xl">
            
            <h1 class="app-page-title">Add New Blog</h1>
            <!-- method="post" action="/blog/addblog" -->
            <form method="post" action="/blog/addblog" enctype="multipart/form-data">
                <div class="form-group">
                  <label for="exampleInputEmail1">Blog Title</label>
                  <input type="text" class="form-control" name ="title"  id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter blog title">
                  <!-- <small id="#" class="form-text text-muted">We'll never share your email with anyone else.</small> -->
                </div>

                <label class="mt-4">Category</label>
                <select class="form-select mb-3" name="categorys">
                    <option selected >Select Category</option>
                    <% for(let i=0 ; i< category.length ; i++) { %> 
                        <option  value="<%= category[i].categorys %>"><%= category[i].categorys %></option>
                     <% } %>
                </select>
                
                <label >Description</label>
                <textarea id="default" class="mt-4" name="description"></textarea>

                
                <div class="form-group mt-4">
                    <label for="exampleFormControlFile1">Select Image</label>
                    <input type="file" class="form-control-file" id="exampleFormControlFile1" name="photo">
                </div>

                <button type="submit" class="btn btn-primary mt-4" onclick="formSubmit('form' , '/blog/addblog' , '/blog/getallblog')">Submit</button>
              </form>
            
        </div><!--//container-fluid-->
    </div><!--//app-content-->


    <!-- TinyMCA Text Editor Script -->
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>

    <script>
        tinymce.init({
                selector: 'textarea#default'
        });

        // function formSubmit(form, url, target) {
        //     alert("function called");
        //     $(form).submit(function(event) {
        //         $.post(url, $(form).serialize())
        //             .done(function(res) {
        //                 if (res.success) {
        //                     window.location = target;
        //                 }
        //                 else {
        //                     alert(res.error);
        //                 }
        //             })
        //             .fail(function(res) {
        //                 alert("Server Error: " + res.status + " " + res.statusText);

        //             })
        //         event.preventDefault();
        //     });
        // }


        // $(document).ready( function () {

        //     $('form').submit(function(event) {
        //         $.post('/blog/addblog', $('form').serialize())
        //             .done(function(res) {
        //                 if (res.success) {
        //                     location.href = "/blog/getallblog";
        //                     // window.location = target;
        //                 }
        //                 else {
        //                     alert(res.error);
        //                 }
        //             })
        //             .fail(function(res) {
        //                 alert("Server Error: " + res.status + " " + res.statusText);
        //             })
        //         event.preventDefault();
        //     });

        // })
    </script>

</body>

</html>