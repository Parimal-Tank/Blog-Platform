<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Blog Admin Portal  This is All Blog Page</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Portal - Bootstrap 5 Admin Dashboard Template For Developers">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">    
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- FontAwesome JS-->
    <script defer src="../../public/plugins/fontawesome/js/all.min.js"></script>
    
    <!-- App CSS -->  
    <link id="theme-style" rel="stylesheet" href="../public/css/style.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head> 


<body>
  <header class="app-header fixed-top">
    <%- include('partials/nav.ejs') -%>
    <%- include('partials/menubar.ejs') -%>
  </header>
    <div class="app-content pt-3 p-md-3 p-lg-4">
        <div class="container-xl">
            
         <h1 class="app-page-title">All Category</h1>

         <div>
            <table class="table table-hover">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Category Name</th>
                    <th scope="col">Actions</th>
                  </tr>
                </thead>


                <tbody>
                  <% for(let i=0 ; i< category.length ; i++) { %>
                  <tr>
                    <th scope="row">
                      <%= i+1 %>
                    </th>
                    <td>
                      <%= category[i].categorys %>
                    </td>
                    <td>
                      <button class="btn btn-primary"  value="<%= category[i]._id %>">Edit</button>  
                      <button class="dltbtn btn btn-danger"  value="<%= category[i]._id %>">Delete</button>   
                    </td>
                  </tr>
                  <% } %>
                </tbody>

              </table>
         </div>

           
    
        </div><!--//container-fluid-->
    </div><!--//app-content-->


    <script>
    $(document).ready(function () {

              $('.dltbtn').on('click' , function() {

                let id = $(this).val();
                console.log(id);

                $.ajax({
                   type: "DELETE",
                   url: `/category/${id}`,
                   data: id,
                   success: function(data) {
                    location.href = "/category/getAllCategory";
                   }
                })
              });


           })
    </script>
</body>

</html>
